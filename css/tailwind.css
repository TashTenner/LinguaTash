@import 'tailwindcss';
@plugin "@tailwindcss/forms";
@plugin '@tailwindcss/typography';
@source '../node_modules/pliny';
@custom-variant dark (&:where(.dark, .dark *));

/* Core theme configuration */
@theme {
  /* Fonts */
  --font-sans: 'Noto Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  --font-accent: 'Caveat', cursive;

  /* ===== LinguaTash: ONLY 6 COLORS (5 used + 1 registered) ===== */
  --color-authority: #081c3c; /* Deep Navy */
  --color-background: #f4efe8; /* Soft Cream */
  --color-surface: #e3ded7; /* Warm Light Grey */
  --color-muted: #9a8f85; /* Warm Taupe (metadata only) */

  --color-accent-primary: #b3475a; /* Terracotta Rose (USED) */
  --color-accent-secondary: #2f6f73; /* Deep Muted Teal (REGISTERED, DO NOT APPLY) */

  /* Primary scale (Terracotta) */
  --color-primary-400: #c66a7a;
  --color-primary-500: #b3475a;
  --color-primary-600: #9f3f50;

  /*
    Tailwind utilities (border-gray-200, text-gray-700, etc.) expect a gray scale.
    We ALIAS all grays to the SAME 4 neutrals (still only using the 6 colors total).
  */
  --color-gray-50: var(--color-background);
  --color-gray-100: var(--color-background);
  --color-gray-200: var(--color-surface);
  --color-gray-300: var(--color-surface);
  --color-gray-400: var(--color-muted);
  --color-gray-500: var(--color-muted);
  --color-gray-600: var(--color-authority);
  --color-gray-700: var(--color-authority);
  --color-gray-800: var(--color-authority);
  --color-gray-900: var(--color-authority);
  --color-gray-950: var(--color-authority);

  /* Line heights */
  --line-height-11: 2.75rem;
  --line-height-12: 3rem;
  --line-height-13: 3.25rem;
  --line-height-14: 3.5rem;

  /* Z-index values */
  --z-60: 60;
  --z-70: 70;
  --z-80: 80;
}

@layer base {
  :root {
    --lt-navy: #081c3c;
    --lt-light: #f4efe8;
    --lt-neutral: #e3ded7;
    --lt-muted: #9a8f85;
    --lt-accent: #b3475a;
    /* NOTE: Teal is intentionally NOT duplicated here */
  }

  /* Apply default border color to all elements */
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor); /* resolves to surface */
  }

  a,
  button {
    outline-color: var(--color-primary-500);
  }

  a:focus-visible,
  button:focus-visible {
    outline: 2px solid;
    border-radius: var(--radius-sm);
    outline-color: var(--color-primary-500);
  }

  body {
    font-family: var(--font-sans);
    background-color: var(--color-background);
    color: var(--color-authority);
  }

  .dark body {
    background-color: var(--color-authority);
    color: var(--color-background); /* only allowed palette */
  }
}

@layer utilities {
  .prose {
    & a {
      color: var(--color-primary-500);
      &:hover {
        color: var(--color-primary-600);
      }
      & code {
        color: var(--color-primary-400);
      }
    }

    & :where(h1, h2, h3, h4, h5, h6) {
      font-family: var(--font-sans);
      letter-spacing: var(--tracking-tight);
    }

    & :where(h1, h2) {
      font-weight: 700;
    }

    & h3 {
      font-weight: 600;
    }

    /* WAS: --color-indigo-500 (adds a 7th color) */
    & :where(code):not(pre code) {
      color: var(--color-primary-500);
      font-family: var(--font-sans);
    }

    & p,
    & li,
    & blockquote {
      font-family: var(--font-sans);
    }
  }

  .prose-invert {
    & a {
      color: var(--color-primary-500);
      &:hover {
        color: var(--color-primary-400);
      }
      & code {
        color: var(--color-primary-400);
        font-family: var(--font-sans);
      }
    }

    & :where(h1, h2, h3, h4, h5, h6) {
      color: var(--color-background);
      font-family: var(--font-sans);
    }

    & p,
    & li,
    & blockquote {
      font-family: var(--font-sans);
      color: var(--color-background);
    }
  }

  .font-accent {
    font-family: var(--font-accent);
  }

  /*
    IMPORTANT:
    Teal is registered as --color-accent-secondary but we avoid providing a ready utility that applies it.
    Keep this class if it exists in markup; make it use Primary instead.
  */
  .accent-info {
    color: var(--color-primary-500);
  }
}

.task-list-item::before {
  @apply hidden;
}

.task-list-item {
  @apply list-none;
}

.footnotes {
  @apply mt-12 border-t border-gray-200 pt-8 dark:border-gray-700;
}

.data-footnote-backref {
  @apply no-underline;
}

.csl-entry {
  @apply my-5;
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

/* https://stackoverflow.com/questions/61083813/how-to-avoid-internal-autofill-selected-style-to-be-applied */
input:-webkit-autofill,
input:-webkit-autofill:focus {
  transition:
    background-color 600000s 0s,
    color 600000s 0s;
}

.katex-display {
  overflow: auto hidden;
}

.content-header-link {
  opacity: 0;
  margin-left: -24px;
  padding-right: 4px;
}

.content-header:hover .content-header-link,
.content-header-link:hover {
  opacity: 1;
}

.linkicon {
  display: inline-block;
  vertical-align: middle;
}
